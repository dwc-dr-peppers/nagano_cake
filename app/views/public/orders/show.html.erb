<div class="container my-3">

  <h4 class="ml-5">注文履歴詳細</h4>

  <div>
    <div class="row">
      <div class="col-7 mt-3">
        <strong>注文情報</strong>
        <table class="table table-bordered mt-2">
          <tbody>
            <tr>
              <td class="table table-secondary" style="width: 20%">注文日</td>
              <td><%= l @order.created_at, format: :short %></td>
            </tr>
            <tr>
              <td class="table table-secondary" style="width: 20%">配送先</td>
              <td>〒
                <%= @order.postcode %>
                <%= @order.address %>
                <%= @order.shipping_name %>
              </td>
            </tr>
            <tr>
              <td class="table table-secondary" style="width: 20%">支払方法</td>
              <td><%= @order.payment_way_i18n %></td>
            </tr>
            <tr>
              <td class="table table-secondary" style="width: 20%">ステータス</td>
              <td><%= @order.status_i18n %></td>
            </tr>
          </tbody>
        </table>
      </div>

      <% @order.order_details.each do |detail| %>
        <% detail.item.with_tax_price * detail.quantitiy %>
        <% @total += detail.item.with_tax_price * detail.quantitiy %>
      <% end %>

      <div class="col-3 mt-3">
        <strong>請求情報</strong>
        <table class="table table-bordered mt-2">
          <tbody>
            <tr>
              <td class="table table-secondary" style="width: 40%">商品合計</td>
              <td><%= @total.to_s(:delimited) %>円</td>
            </tr>
            <tr>
              <td class="table table-secondary" style="width: 40%">配送料</td>
              <td><%= @order.postage.to_s(:delimited) %>円</td>
            </tr>
            <tr>
              <td class="table table-secondary" style="width: 40%">ご請求額</td>
              <td><%= @order.total_amount.to_s(:delimited) %>円</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-2"></div>
    </div>


    <div class="row">
      <div class="col-8">
        <strong>注文内容</strong>
        <table class="table table-bordered mt-2">
          <thead class="table table-secondary">
            <tr>
              <td style="width: 60%">商品</td>
              <td style="width: 15%">単価(税込)</td>
              <td style="width: 10%">個数</td>
              <td style="width: 15%">小計</td>
            </tr>
          </thead>

          <% @order.order_details.each do |detail| %>
          <tbody>
            <tr>
              <td><%= detail.item.name %></td>
              <td><%= detail.item.with_tax_price %>円</td>
              <td><%= detail.quantitiy %></td>
              <td>
              <%= detail.item.with_tax_price * detail.quantitiy %>円
              </td>
            </tr>
            <% @total += detail.item.with_tax_price * detail.quantitiy %>
          </tbody>
          <% end %>
        </table>
      </div>
      <div class="col-4"></div>
    </div>
  </div>

</div>
